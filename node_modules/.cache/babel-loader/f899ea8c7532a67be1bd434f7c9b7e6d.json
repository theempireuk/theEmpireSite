{"ast":null,"code":"import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nfunction ImageLoader(manager) {\n  Loader.call(this, manager);\n}\n\nImageLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: ImageLoader,\n  load: function load(url, onLoad, onProgress, onError) {\n    if (this.path !== undefined) url = this.path + url;\n    url = this.manager.resolveURL(url);\n    var scope = this;\n    var cached = Cache.get(url);\n\n    if (cached !== undefined) {\n      scope.manager.itemStart(url);\n      setTimeout(function () {\n        if (onLoad) onLoad(cached);\n        scope.manager.itemEnd(url);\n      }, 0);\n      return cached;\n    }\n\n    var image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n    function onImageLoad() {\n      image.removeEventListener('load', onImageLoad, false);\n      image.removeEventListener('error', onImageError, false);\n      Cache.add(url, this);\n      if (onLoad) onLoad(this);\n      scope.manager.itemEnd(url);\n    }\n\n    function onImageError(event) {\n      image.removeEventListener('load', onImageLoad, false);\n      image.removeEventListener('error', onImageError, false);\n      if (onError) onError(event);\n      scope.manager.itemError(url);\n      scope.manager.itemEnd(url);\n    }\n\n    image.addEventListener('load', onImageLoad, false);\n    image.addEventListener('error', onImageError, false);\n\n    if (url.substr(0, 5) !== 'data:') {\n      if (this.crossOrigin !== undefined) image.crossOrigin = this.crossOrigin;\n    }\n\n    scope.manager.itemStart(url);\n    image.src = url;\n    return image;\n  }\n});\nexport { ImageLoader };","map":{"version":3,"sources":["/Users/sebringrose/Projects/theEmpire/website/client/node_modules/three/src/loaders/ImageLoader.js"],"names":["Cache","Loader","ImageLoader","manager","call","prototype","Object","assign","create","constructor","load","url","onLoad","onProgress","onError","path","undefined","resolveURL","scope","cached","get","itemStart","setTimeout","itemEnd","image","document","createElementNS","onImageLoad","removeEventListener","onImageError","add","event","itemError","addEventListener","substr","crossOrigin","src"],"mappings":"AAAA,SAASA,KAAT,QAAsB,YAAtB;AACA,SAASC,MAAT,QAAuB,aAAvB;;AAEA,SAASC,WAAT,CAAsBC,OAAtB,EAAgC;AAE/BF,EAAAA,MAAM,CAACG,IAAP,CAAa,IAAb,EAAmBD,OAAnB;AAEA;;AAEDD,WAAW,CAACG,SAAZ,GAAwBC,MAAM,CAACC,MAAP,CAAeD,MAAM,CAACE,MAAP,CAAeP,MAAM,CAACI,SAAtB,CAAf,EAAkD;AAEzEI,EAAAA,WAAW,EAAEP,WAF4D;AAIzEQ,EAAAA,IAAI,EAAE,cAAWC,GAAX,EAAgBC,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,QAAK,KAAKC,IAAL,KAAcC,SAAnB,EAA+BL,GAAG,GAAG,KAAKI,IAAL,GAAYJ,GAAlB;AAE/BA,IAAAA,GAAG,GAAG,KAAKR,OAAL,CAAac,UAAb,CAAyBN,GAAzB,CAAN;AAEA,QAAMO,KAAK,GAAG,IAAd;AAEA,QAAMC,MAAM,GAAGnB,KAAK,CAACoB,GAAN,CAAWT,GAAX,CAAf;;AAEA,QAAKQ,MAAM,KAAKH,SAAhB,EAA4B;AAE3BE,MAAAA,KAAK,CAACf,OAAN,CAAckB,SAAd,CAAyBV,GAAzB;AAEAW,MAAAA,UAAU,CAAE,YAAY;AAEvB,YAAKV,MAAL,EAAcA,MAAM,CAAEO,MAAF,CAAN;AAEdD,QAAAA,KAAK,CAACf,OAAN,CAAcoB,OAAd,CAAuBZ,GAAvB;AAEA,OANS,EAMP,CANO,CAAV;AAQA,aAAOQ,MAAP;AAEA;;AAED,QAAMK,KAAK,GAAGC,QAAQ,CAACC,eAAT,CAA0B,8BAA1B,EAA0D,KAA1D,CAAd;;AAEA,aAASC,WAAT,GAAuB;AAEtBH,MAAAA,KAAK,CAACI,mBAAN,CAA2B,MAA3B,EAAmCD,WAAnC,EAAgD,KAAhD;AACAH,MAAAA,KAAK,CAACI,mBAAN,CAA2B,OAA3B,EAAoCC,YAApC,EAAkD,KAAlD;AAEA7B,MAAAA,KAAK,CAAC8B,GAAN,CAAWnB,GAAX,EAAgB,IAAhB;AAEA,UAAKC,MAAL,EAAcA,MAAM,CAAE,IAAF,CAAN;AAEdM,MAAAA,KAAK,CAACf,OAAN,CAAcoB,OAAd,CAAuBZ,GAAvB;AAEA;;AAED,aAASkB,YAAT,CAAuBE,KAAvB,EAA+B;AAE9BP,MAAAA,KAAK,CAACI,mBAAN,CAA2B,MAA3B,EAAmCD,WAAnC,EAAgD,KAAhD;AACAH,MAAAA,KAAK,CAACI,mBAAN,CAA2B,OAA3B,EAAoCC,YAApC,EAAkD,KAAlD;AAEA,UAAKf,OAAL,EAAeA,OAAO,CAAEiB,KAAF,CAAP;AAEfb,MAAAA,KAAK,CAACf,OAAN,CAAc6B,SAAd,CAAyBrB,GAAzB;AACAO,MAAAA,KAAK,CAACf,OAAN,CAAcoB,OAAd,CAAuBZ,GAAvB;AAEA;;AAEDa,IAAAA,KAAK,CAACS,gBAAN,CAAwB,MAAxB,EAAgCN,WAAhC,EAA6C,KAA7C;AACAH,IAAAA,KAAK,CAACS,gBAAN,CAAwB,OAAxB,EAAiCJ,YAAjC,EAA+C,KAA/C;;AAEA,QAAKlB,GAAG,CAACuB,MAAJ,CAAY,CAAZ,EAAe,CAAf,MAAuB,OAA5B,EAAsC;AAErC,UAAK,KAAKC,WAAL,KAAqBnB,SAA1B,EAAsCQ,KAAK,CAACW,WAAN,GAAoB,KAAKA,WAAzB;AAEtC;;AAEDjB,IAAAA,KAAK,CAACf,OAAN,CAAckB,SAAd,CAAyBV,GAAzB;AAEAa,IAAAA,KAAK,CAACY,GAAN,GAAYzB,GAAZ;AAEA,WAAOa,KAAP;AAEA;AAxEwE,CAAlD,CAAxB;AA6EA,SAAStB,WAAT","sourcesContent":["import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\n\nexport { ImageLoader };\n"]},"metadata":{},"sourceType":"module"}